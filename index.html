<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmWise - Professional Gardening Services</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .font-playfair {
            font-family: 'Playfair Display', serif;
        }
        .hero-bg {
            background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('0422H1-5600a-1800x1012.webp');
            background-size: cover;
            background-position: center;
            position: relative; /* Needed for particle canvas positioning */
        }
        #particle-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* Behind the content */
        }
        .hero-content {
            position: relative;
            z-index: 2; /* In front of the particles */
        }
        
        /* New animation for the text gradient */
        .text-gradient-animation {
            background-image: linear-gradient(
                to right,
                #ffffff 20%,
                #4ade80 40%,
                #4ade80 60%,
                #ffffff 80%
            );
            background-size: 200% auto;
            color: #000;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 4s linear infinite;
        }

        @keyframes shine {
            to {
                background-position: -200% center;
            }
        }

        /* Loading spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4ade80; /* Green spinner */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Voice button styles */
        .mic-btn.listening {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(6, 182, 212, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(6, 182, 212, 0); }
            100% { box-shadow: 0 0 0 0 rgba(6, 182, 212, 0); }
        }
        /* Tab styles */
        .tab-btn {
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            border-color: #22c55e; /* green-500 */
            color: #166534; /* green-800 */
            background-color: #dcfce7; /* green-100 */
        }
        /* Styling for AI-generated Markdown content */
        .ai-content-style p {
            margin-bottom: 1rem;
            line-height: 1.75;
        }
        .ai-content-style h1, .ai-content-style h2, .ai-content-style h3, .ai-content-style h4 {
            font-family: 'Playfair Display', serif;
            color: #15803d; /* text-green-700 */
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        .ai-content-style h1 { font-size: 1.875rem; }
        .ai-content-style h2 { font-size: 1.5rem; }
        .ai-content-style h3 { font-size: 1.25rem; }
        .ai-content-style ul {
            list-style-type: disc;
            list-style-position: inside;
            padding-left: 1rem;
            margin-bottom: 1rem;
        }
        .ai-content-style li {
            margin-bottom: 0.5rem;
        }
        .ai-content-style strong {
            font-weight: 600; /* semibold */
            color: #166534; /* text-green-800 */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#home" class="text-2xl font-bold text-green-800 font-playfair">FarmWise</a>
            <div class="hidden md:flex space-x-8">
                <a href="#home" class="text-gray-600 hover:text-green-700 transition duration-300">Home</a>
                <a href="#services" class="text-gray-600 hover:text-green-700 transition duration-300">Problems</a>
                <a href="#advanced-techniques" class="text-gray-600 hover:text-green-700 transition duration-300">Plan your garden</a>
                <a href="#Connect" class="text-gray-600 hover:text-green-700 transition duration-300">Connect</a>
                <a href="#about" class="text-gray-600 hover:text-green-700 transition duration-300">About</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-gray-700 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pt-2 pb-4">
            <a href="#home" class="block py-2 text-gray-600 hover:text-green-700">Home</a>
            <a href="#services" class="block py-2 text-gray-600 hover:text-green-700">Problems</a>
            <a href="#advanced-techniques" class="block py-2 text-gray-600 hover:text-green-700">Plan your garden</a>
            <a href="#Connect" class="block py-2 text-gray-600 hover:text-green-700">Connect</a>
            <a href="#about" class="block py-2 text-gray-600 hover:text-green-700">About</a>
        </div>
    </header>

    <section id="home" class="hero-bg text-white h-[calc(100vh-80px)] flex items-center justify-center">
        <canvas id="particle-canvas"></canvas>
        <div class="hero-content container mx-auto px-6 text-center">
            <h1 class="text-4xl md:text-6xl font-bold font-playfair mb-4 text-gradient-animation">Innovating Agriculture Through Technology</h1>
            <p class="text-lg md:text-xl max-w-3xl mx-auto mb-8">Transforming agricultural practices with cutting-edge tech for a sustainable future.</p>
            <a href="#contact" class="bg-white text-green-800 font-bold px-8 py-4 rounded-full hover:bg-gray-200 transition duration-300 text-lg">Schedule a Consultation</a>
        </div>
    </section>

    <section id="services" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-green-800 font-playfair">Problems We Solve</h2>
                <p class="text-gray-600 mt-2">Addressing key challenges for aspiring and current food gardeners.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-gray-50 p-8 rounded-lg shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2">
                    <h3 class="text-2xl font-bold font-playfair text-green-700 mb-4">Lack of Hands-On Training</h3>
                    <p class="text-gray-600">Many new gardeners struggle to apply theoretical knowledge. We provide practical, step-by-step guidance to build real-world skills and confidence.</p>
                </div>
                <div class="bg-gray-50 p-8 rounded-lg shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2">
                    <h3 class="text-2xl font-bold font-playfair text-green-700 mb-4">Outdated Agricultural Knowledge</h3>
                    <p class="text-gray-600">Agricultural science evolves. We bridge the gap by providing access to the latest, most effective techniques for sustainable and productive food gardening.</p>
                </div>
                <div class="bg-gray-50 p-8 rounded-lg shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-2">
                    <h3 class="text-2xl font-bold font-playfair text-green-700 mb-4">Lack of Ongoing Support</h3>
                    <p class="text-gray-600">Beginners and isolated individuals often face challenges alone. Our platform offers continuous technical support to solve problems and scale up effectively.</p>
                </div>
            </div>
        </div>
    </section>
    
    <section id="advanced-techniques" class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-green-800 font-playfair">Plan Your Garden</h2>
                <p class="text-gray-600 mt-2">Leverage our AI-powered tools and expert community to design your perfect garden.</p>
            </div>
            <div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-lg mb-16">
                <h3 class="text-2xl font-bold font-playfair text-green-700 mb-4 text-center">‚ú® AI Garden Planner</h3>
                <form id="ai-planner-form">
                    <div class="mb-4">
                        <label for="garden-description" class="block text-gray-700 font-medium mb-2">1. Describe your vision (or use the mic):</label>
                        <div class="relative">
                            <textarea id="garden-description" name="garden-description" rows="5" class="w-full px-4 py-2 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="e.g., 'A sunny balcony in Pretoria for growing herbs and tomatoes.' or 'A shady patch in my backyard for a quiet, low-maintenance flower garden.'" required></textarea>
                            <button type="button" id="mic-btn" class="mic-btn absolute top-1/2 right-3 -translate-y-1/2 text-gray-500 hover:text-green-600" title="Start voice input">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" /></svg>
                            </button>
                        </div>
                         <p id="voice-status" class="text-sm text-gray-500 mt-1 h-4"></p>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-gray-700 font-medium mb-2">2. (Optional) Upload a picture:</label>
                        <input type="file" id="garden-image-input" class="hidden" accept="image/*">
                        <button type="button" id="upload-image-btn" class="w-full bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition duration-300">
                            Upload Image
                        </button>
                        <div id="image-preview-container" class="mt-4 hidden relative">
                            <img id="image-preview" class="max-w-full h-auto mx-auto rounded-lg shadow-md">
                            <button type="button" id="remove-image-btn" class="absolute top-2 right-2 bg-red-500 text-white rounded-full h-8 w-8 flex items-center justify-center font-bold text-lg">&times;</button>
                        </div>
                    </div>

                    <div class="text-center">
                        <button type="submit" id="generate-plan-btn" class="bg-green-700 text-white font-bold px-8 py-3 rounded-full hover:bg-green-800 transition duration-300 inline-flex items-center">
                            Generate My Garden Plan
                        </button>
                    </div>
                </form>
                <div id="ai-plan-result" class="mt-8 hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h3 id="ai-plan-title" class="text-2xl font-bold font-playfair text-green-700">Your Custom Garden Plan:</h3>
                        <button id="read-aloud-btn" class="text-gray-500 hover:text-green-600" title="Read plan aloud">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" /></svg>
                        </button>
                    </div>
                    <div id="ai-plan-content" class="ai-content-style text-gray-700 bg-gray-50 p-6 rounded-lg"></div>
                </div>
                <div id="loader" class="hidden">
                    <div class="loader"></div>
                    <p class="text-center text-gray-600">Our AI is analyzing your space... please wait.</p>
                </div>
            </div>

            <div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-lg mt-16">
                <h3 class="text-2xl font-bold font-playfair text-green-700 mb-4 text-center">üå± Plant Spacing & Seed Calculator</h3>
                <p class="text-center text-gray-600 mb-6">Convert bed dimensions and crop spacing into plant counts and row layouts to prevent overcrowding and seed waste.</p>
                <form id="spacing-calculator-form">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="bed-length" class="block text-gray-700 font-medium mb-1">Bed Length (meters)</label>
                            <input type="number" id="bed-length" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="e.g., 5" step="0.1" required>
                        </div>
                        <div>
                            <label for="bed-width" class="block text-gray-700 font-medium mb-1">Bed Width (meters)</label>
                            <input type="number" id="bed-width" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="e.g., 1.2" step="0.1" required>
                        </div>
                        <div>
                            <label for="plant-spacing" class="block text-gray-700 font-medium mb-1">Spacing Between Plants (cm)</label>
                            <input type="number" id="plant-spacing" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="e.g., 30" required>
                        </div>
                        <div>
                            <label for="row-spacing" class="block text-gray-700 font-medium mb-1">Spacing Between Rows (cm)</label>
                            <input type="number" id="row-spacing" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="e.g., 45" required>
                        </div>
                    </div>
                    <div class="text-center mt-6">
                        <button type="submit" class="bg-green-700 text-white font-bold px-8 py-3 rounded-full hover:bg-green-800 transition">Calculate</button>
                    </div>
                </form>
                <div id="calculator-results" class="mt-8 hidden bg-green-50 p-6 rounded-lg">
                    <h4 class="font-bold text-lg text-green-800 mb-2">Calculation Results:</h4>
                    <ul class="space-y-2 text-gray-700">
                        <li>Plants per row: <strong id="plants-per-row"></strong></li>
                        <li>Number of rows: <strong id="num-rows"></strong></li>
                        <li class="text-xl">Total Plants: <strong id="total-plants" class="text-green-900"></strong></li>
                        <li>Estimated seeds needed (with 20% extra for germination): <strong id="seed-needs"></strong></li>
                    </ul>
                </div>
            </div>

            <div id="Connect"></div>

            <div class="mt-16">
                <h3 class="text-3xl md:text-4xl font-bold text-green-800 font-playfair text-center mb-12">Connect with featured Farmers</h3>
                <div id="farmer-grid" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <article tabindex="0" role="button" class="farmer-card bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1 cursor-pointer"
                        data-name="Sipho Ngcobo"
                        data-image="OIP.webp"
                        data-bio="Organic vegetable farmer & permaculture practitioner. Runs demonstration beds and trains local growers in soil-building techniques and natural pest management."
                        data-experience="10"
                        data-specialties="Permaculture, Organic Veg, Soil Health"
                        data-email="sipho.ngcobo@example.com"
                        data-phone="+271000000001">
                        <div class="flex items-center gap-4">
                            <img src="OIP.webp" alt="Sipho Ngcobo profile photo" class="w-16 h-16 rounded-full object-cover border-4 border-green-200">
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Sipho Ngcobo</h4>
                                <p class="text-sm text-gray-600">Permaculture & Organic Vegetables</p>
                            </div>
                            <button class="ml-auto follow-btn px-3 py-1 border rounded text-green-700 border-green-300 hover:bg-green-50" aria-pressed="false">Follow</button>
                        </div>
                        <p class="mt-4 text-gray-600">Runs demonstration beds and trains growers in soil-building and natural pest management.</p>
                        <div class="mt-4 flex gap-2">
                            <button class="view-profile-btn px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600">View Profile</button>
                            <button class="message-btn px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Message</button>
                        </div>
                    </article>

                    <article tabindex="0" role="button" class="farmer-card bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1 cursor-pointer"
                        data-name="Lienkie Fourie"
                        data-image="scott-vickaryous_2255915.jpg"
                        data-bio="Viticulture and water-wise orchard specialist focusing on drought-tolerant varieties and efficient irrigation design."
                        data-experience="8"
                        data-specialties="Viticulture, Irrigation"
                        data-email="lienkie.fourie@example.com"
                        data-phone="+271000000002">
                        <div class="flex items-center gap-4">
                            <img src="scott-vickaryous_2255915.jpg" alt="Lienkie Fourie profile photo" class="w-16 h-16 rounded-full object-cover border-4 border-green-200">
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Lienkie Fourie</h4>
                                <p class="text-sm text-gray-600">Viticulture & Water-wise Orchards</p>
                            </div>
                            <button class="ml-auto follow-btn px-3 py-1 border rounded text-green-700 border-green-300 hover:bg-green-50" aria-pressed="false">Follow</button>
                        </div>
                        <p class="mt-4 text-gray-600"><strong>Tip:</strong> "Install a drip irrigation system to save water and deliver moisture directly to the roots."</p>
                        <div class="mt-4 flex gap-2">
                            <button class="view-profile-btn px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600">View Profile</button>
                            <button class="message-btn px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Message</button>
                        </div>
                    </article>

                    <article tabindex="0" role="button" class="farmer-card bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1 cursor-pointer"
                        data-name="Tshepo Molefe"
                        data-image="ab4527336ab87af4034f5ed5845910d2.jpg"
                        data-bio="Urban farm manager specialising in vertical farming and soilless systems; adapts setups for small urban spaces."
                        data-experience="6"
                        data-specialties="Vertical Farming, Hydroponics"
                        data-email="tshepo.molefe@example.com"
                        data-phone="+271000000003">
                        <div class="flex items-center gap-4">
                            <img src="ab4527336ab87af4034f5ed5845910d2.jpg" alt="Tshepo Molefe profile photo" class="w-16 h-16 rounded-full object-cover border-4 border-green-200">
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Tshepo Molefe</h4>
                                <p class="text-sm text-gray-600">Vertical & Soilless Systems</p>
                            </div>
                            <button class="ml-auto follow-btn px-3 py-1 border rounded text-green-700 border-green-300 hover:bg-green-50" aria-pressed="false">Follow</button>
                        </div>
                        <p class="mt-4 text-gray-600">Helps adapt hydroponic and vertical setups for balconies and small yards.</p>
                        <div class="mt-4 flex gap-2">
                            <button class="view-profile-btn px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600">View Profile</button>
                            <button class="message-btn px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Message</button>
                        </div>
                    </article>

                    <article tabindex="0" role="button" class="farmer-card bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1 cursor-pointer"
                        data-name="Anja van der Merwe"
                        data-image="OIP (1).webp"
                        data-bio="Large-scale agronomist experienced in precision agriculture for grain and oilseed crops."
                        data-experience="14"
                        data-specialties="Precision Ag, Agronomy"
                        data-email="anja.vdmerwe@example.com"
                        data-phone="+271000000004">
                        <div class="flex items-center gap-4">
                            <img src="OIP (1).webp" alt="Anja van der Merwe profile photo" class="w-16 h-16 rounded-full object-cover border-4 border-green-200">
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Anja van der Merwe</h4>
                                <p class="text-sm text-gray-600">Precision Agriculture & Agronomy</p>
                            </div>
                            <button class="ml-auto follow-btn px-3 py-1 border rounded text-green-700 border-green-300 hover:bg-green-50" aria-pressed="false">Follow</button>
                        </div>
                        <p class="mt-4 text-gray-600">Advises on large-scale soil testing and crop planning.</p>
                        <div class="mt-4 flex gap-2">
                            <button class="view-profile-btn px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600">View Profile</button>
                            <button class="message-btn px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Message</button>
                        </div>
                    </article>

                    <article tabindex="0" role="button" class="farmer-card bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1 cursor-pointer"
                        data-name="Zola Nkosi"
                        data-image="1000_F_575112763_uTwJs7y8QqEp8gFi7ws6675WLReBZNQn.jpg"
                        data-bio="Indigenous plant and medicinal herb specialist advising on native species and sustainable wild-harvesting."
                        data-experience="11"
                        data-specialties="Indigenous Plants, Medicinal Herbs"
                        data-email="zola.nkosi@example.com"
                        data-phone="+271000000005">
                        <div class="flex items-center gap-4">
                            <img src="1000_F_575112763_uTwJs7y8QqEp8gFi7ws6675WLReBZNQn.jpg" alt="Zola Nkosi profile photo" class="w-16 h-16 rounded-full object-cover border-4 border-green-200">
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Zola Nkosi</h4>
                                <p class="text-sm text-gray-600">Indigenous & Medicinal Plants</p>
                            </div>
                            <button class="ml-auto follow-btn px-3 py-1 border rounded text-green-700 border-green-300 hover:bg-green-50" aria-pressed="false">Follow</button>
                        </div>
                        <p class="mt-4 text-gray-600">Advises on native species to support biodiversity and sustainable harvesting.</p>
                        <div class="mt-4 flex gap-2">
                            <button class="view-profile-btn px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600">View Profile</button>
                            <button class="message-btn px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Message</button>
                        </div>
                    </article>

                    <article tabindex="0" role="button" class="farmer-card bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1 cursor-pointer"
                        data-name="Ben Pienaar"
                        data-image="mountain-thunder-chilli-plant.jpg"
                        data-bio="Subtropical fruit grower experienced with avocados, mangoes and macadamias; focuses on mulch strategies and post-harvest handling."
                        data-experience="13"
                        data-specialties="Subtropical Fruit, Post-harvest"
                        data-email="ben.pienaar@example.com"
                        data-phone="+271000000006">
                        <div class="flex items-center gap-4">
                            <img src="mountain-thunder-chilli-plant.jpg" alt="Ben Pienaar profile photo" class="w-16 h-16 rounded-full object-cover border-4 border-green-200">
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Ben Pienaar</h4>
                                <p class="text-sm text-gray-600">Subtropical Fruits & Mulching</p>
                            </div>
                            <button class="ml-auto follow-btn px-3 py-1 border rounded text-green-700 border-green-300 hover:bg-green-50" aria-pressed="false">Follow</button>
                        </div>
                        <p class="mt-4 text-gray-600">Focuses on soil moisture retention and post-harvest care to reduce losses.</p>
                        <div class="mt-4 flex gap-2">
                            <button class="view-profile-btn px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600">View Profile</button>
                            <button class="message-btn px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Message</button>
                        </div>
                    </article>

                    <article tabindex="0" role="button" class="farmer-card bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1 cursor-pointer"
                        data-name="Rethabile Mokoena"
                        data-image="smile-countryside-portrait-black-woman-farm-with-sustainable-business-nature-sunshine-agriculture-gardening-happy-face-female-farmer-africa-green-plants-agro-farming_590464-225343.avif"
                        data-bio="Community leader in small-scale poultry and vegetable farming; runs composting workshops and youth training programs."
                        data-experience="9"
                        data-specialties="Composting, Community Training"
                        data-email="rethabile.mokoena@example.com"
                        data-phone="+271000000007">
                        <div class="flex items-center gap-4">
                            <img src="smile-countryside-portrait-black-woman-farm-with-sustainable-business-nature-sunshine-agriculture-gardening-happy-face-female-farmer-africa-green-plants-agro-farming_590464-225343.avif" alt="Rethabile Mokoena profile photo" class="w-16 h-16 rounded-full object-cover border-4 border-green-200">
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Rethabile Mokoena</h4>
                                <p class="text-sm text-gray-600">Composting & Poultry</p>
                            </div>
                            <button class="ml-auto follow-btn px-3 py-1 border rounded text-green-700 border-green-300 hover:bg-green-50" aria-pressed="false">Follow</button>
                        </div>
                        <p class="mt-4 text-gray-600">Leads youth training and hands-on composting workshops for communities.</p>
                        <div class="mt-4 flex gap-2">
                            <button class="view-profile-btn px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600">View Profile</button>
                            <button class="message-btn px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Message</button>
                        </div>
                    </article>

                    <article tabindex="0" role="button" class="farmer-card bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1 cursor-pointer"
                        data-name="Dirk Venter"
                        data-image="OIP (2).webp"
                        data-bio="Specialist in hardy livestock and drought-resistant crops; advises on varietal selection and dryland farming practices."
                        data-experience="16"
                        data-specialties="Dryland Farming, Livestock"
                        data-email="dirk.venter@example.com"
                        data-phone="+271000000008">
                        <div class="flex items-center gap-4">
                            <img src="OIP (2).webp" alt="Dirk Venter profile photo" class="w-16 h-16 rounded-full object-cover border-4 border-green-200">
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Dirk Venter</h4>
                                <p class="text-sm text-gray-600">Dryland Farming & Livestock</p>
                            </div>
                            <button class="ml-auto follow-btn px-3 py-1 border rounded text-green-700 border-green-300 hover:bg-green-50" aria-pressed="false">Follow</button>
                        </div>
                        <p class="mt-4 text-gray-600">Advises on drought-resistant varieties and low-water livestock systems.</p>
                        <div class="mt-4 flex gap-2">
                            <button class="view-profile-btn px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600">View Profile</button>
                            <button class="message-btn px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Message</button>
                        </div>
                    </article>

                    <article tabindex="0" role="button" class="farmer-card bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1 cursor-pointer"
                        data-name="Fatima Motala"
                        data-image="OIP (3).webp"
                        data-bio="Aquaponics innovator combining fish culture and soilless vegetable production for efficient closed-loop systems."
                        data-experience="7"
                        data-specialties="Aquaponics, Soilless Systems"
                        data-email="fatima.motala@example.com"
                        data-phone="+271000000009">
                        <div class="flex items-center gap-4">
                            <img src="OIP (3).webp" alt="Fatima Motala profile photo" class="w-16 h-16 rounded-full object-cover border-4 border-green-200">
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Fatima Motala</h4>
                                <p class="text-sm text-gray-600">Aquaponics & Soilless</p>
                            </div>
                            <button class="ml-auto follow-btn px-3 py-1 border rounded text-green-700 border-green-300 hover:bg-green-50" aria-pressed="false">Follow</button>
                        </div>
                        <p class="mt-4 text-gray-600">Designs compact aquaponics systems suitable for households and schools.</p>
                        <div class="mt-4 flex gap-2">
                            <button class="view-profile-btn px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600">View Profile</button>
                            <button class="message-btn px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Message</button>
                        </div>
                    </article>

                    <article tabindex="0" role="button" class="farmer-card bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1 cursor-pointer"
                        data-name="Thabo Cele"
                        data-image="close-up-portrait-black-male-office-worker_153608-3740.jpg"
                        data-bio="Urban beekeeper and pollination advocate helping gardeners select pollinator-friendly plants to boost yields."
                        data-experience="5"
                        data-specialties="Beekeeping, Pollination"
                        data-email="thabo.cele@example.com"
                        data-phone="+271000000010">
                        <div class="flex items-center gap-4">
                            <img src="close-up-portrait-black-male-office-worker_153608-3740.jpg" alt="Thabo Cele profile photo" class="w-16 h-16 rounded-full object-cover border-4 border-green-200">
                            <div>
                                <h4 class="text-lg font-semibold text-green-800">Thabo Cele</h4>
                                <p class="text-sm text-gray-600">Beekeeping & Pollination</p>
                            </div>
                            <button class="ml-auto follow-btn px-3 py-1 border rounded text-green-700 border-green-300 hover:bg-green-50" aria-pressed="false">Follow</button>
                        </div>
                        <p class="mt-4 text-gray-600">Promotes pollinator-friendly plantings like lavender and basil to improve yields.</p>
                        <div class="mt-4 flex gap-2">
                            <button class="view-profile-btn px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600">View Profile</button>
                            <button class="message-btn px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Message</button>
                        </div>
                    </article>
                </div>
            </div>

            <div id="farmer-modal" class="fixed inset-0 hidden z-50 items-center justify-center bg-black bg-opacity-50">
                <div class="bg-white rounded-lg max-w-3xl w-full p-6 relative mx-4">
                    <button id="farmer-modal-close" class="absolute right-4 top-4 text-gray-500 hover:text-gray-800" aria-label="Close profile">&times;</button>
                    <div class="flex flex-col md:flex-row gap-6">
                        <img id="modal-image" src="" alt="" class="w-full md:w-48 h-48 rounded-lg object-cover">
                        <div class="flex-1">
                            <h3 id="modal-name" class="text-2xl font-playfair font-bold text-green-800"></h3>
                            <p id="modal-specialties" class="text-sm text-gray-600 mt-1"></p>
                            <p id="modal-experience" class="text-sm text-gray-600 mt-1"></p>
                            <div id="modal-bio" class="ai-content-style mt-4 text-gray-700"></div>
                            <div class="mt-6 flex flex-wrap gap-2">
                                <a id="modal-contact-email" class="inline-block px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600" href="#">Email</a>
                                <a id="modal-call" class="inline-block px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50" href="#">Call</a>
                                <button id="modal-schedule" class="inline-block px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-400">Schedule Consultation</button>
                                <button id="modal-follow" class="inline-block px-4 py-2 border border-green-700 text-green-700 rounded hover:bg-green-50">Follow</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

    <script>
    // ...existing code...
        // --- Farmer profiles interactivity ---
        (function () {
            const grid = document.getElementById('farmer-grid');
            const modal = document.getElementById('farmer-modal');
            const modalClose = document.getElementById('farmer-modal-close');
            const modalImage = document.getElementById('modal-image');
            const modalName = document.getElementById('modal-name');
            const modalSpecialties = document.getElementById('modal-specialties');
            const modalExperience = document.getElementById('modal-experience');
            const modalBio = document.getElementById('modal-bio');
            const modalEmail = document.getElementById('modal-contact-email');
            const modalCall = document.getElementById('modal-call');
            const modalSchedule = document.getElementById('modal-schedule');
            const modalFollow = document.getElementById('modal-follow');

            if (!grid) return;

            const getFollowed = () => {
                try {
                    return JSON.parse(localStorage.getItem('followedFarmers') || '[]');
                } catch {
                    return [];
                }
            };
            const setFollowed = (list) => {
                localStorage.setItem('followedFarmers', JSON.stringify(list));
            };

            // initialize follow buttons on cards
            grid.querySelectorAll('.farmer-card').forEach(card => {
                const followBtn = card.querySelector('.follow-btn');
                const id = card.dataset.name;
                const followed = getFollowed().includes(id);
                followBtn.textContent = followed ? 'Following' : 'Follow';
                followBtn.setAttribute('aria-pressed', followed ? 'true' : 'false');

                followBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const list = getFollowed();
                    if (list.includes(id)) {
                        const idx = list.indexOf(id); list.splice(idx, 1);
                        followBtn.textContent = 'Follow';
                        followBtn.setAttribute('aria-pressed', 'false');
                    } else {
                        list.push(id);
                        followBtn.textContent = 'Following';
                        followBtn.setAttribute('aria-pressed', 'true');
                    }
                    setFollowed(list);
                });
            });

            function openProfileFromCard(card) {
                const name = card.dataset.name;
                const image = card.dataset.image;
                const bio = card.dataset.bio;
                const experience = card.dataset.experience;
                const specialties = card.dataset.specialties;
                const email = card.dataset.email;
                const phone = card.dataset.phone;

                modalImage.src = image || '';
                modalImage.alt = name;
                modalName.textContent = name;
                modalSpecialties.textContent = specialties ? `Specialties: ${specialties}` : '';
                modalExperience.textContent = experience ? `Experience: ${experience} years` : '';
                modalBio.textContent = bio || '';
                modalEmail.href = `mailto:${email}?subject=Inquiry%20for%20${encodeURIComponent(name)}`;
                modalCall.href = `tel:${phone || ''}`;

                // follow button sync
                const followed = getFollowed().includes(name);
                modalFollow.textContent = followed ? 'Following' : 'Follow';
                modalFollow.setAttribute('aria-pressed', followed ? 'true' : 'false');

                modal.classList.remove('hidden');
                modal.classList.add('flex');
                modalClose.focus();
            }

            // open when card clicked or activated by keyboard
            grid.querySelectorAll('.farmer-card').forEach(card => {
                card.addEventListener('click', () => openProfileFromCard(card));
                card.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        openProfileFromCard(card);
                    }
                });

                // message button
                const messageBtn = card.querySelector('.message-btn');
                messageBtn && messageBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const email = card.dataset.email;
                    const name = card.dataset.name;
                    // open email client
                    window.location.href = `mailto:${email}?subject=Hello%20${encodeURIComponent(name)}&body=Hi%20${encodeURIComponent(name)},%0A%0AI'd%20like%20to%20ask%20about%20your%20services.`;
                });
            });

            // modal follow toggle
            modalFollow && modalFollow.addEventListener('click', () => {
                const name = modalName.textContent;
                const list = getFollowed();
                if (list.includes(name)) {
                    const idx = list.indexOf(name); list.splice(idx, 1);
                    modalFollow.textContent = 'Follow';
                    modalFollow.setAttribute('aria-pressed', 'false');
                } else {
                    list.push(name);
                    modalFollow.textContent = 'Following';
                    modalFollow.setAttribute('aria-pressed', 'true');
                }
                setFollowed(list);

                // sync card buttons
                document.querySelectorAll('.farmer-card').forEach(card => {
                    if (card.dataset.name === name) {
                        const btn = card.querySelector('.follow-btn');
                        const followed = getFollowed().includes(name);
                        btn.textContent = followed ? 'Following' : 'Follow';
                        btn.setAttribute('aria-pressed', followed ? 'true' : 'false');
                    }
                });
            });

            // Schedule consultation: scroll to contact and prefill form if fields exist
            modalSchedule && modalSchedule.addEventListener('click', () => {
                const farmerName = modalName.textContent;
                const contactAnchor = document.getElementById('contact');
                if (contactAnchor) contactAnchor.scrollIntoView({ behavior: 'smooth', block: 'start' });
                // try to prefill contact form if inputs exist
                const nameField = document.getElementById('name');
                const messageField = document.getElementById('message');
                const emailField = document.getElementById('email');
                if (nameField) nameField.value = `Consultation request: ${farmerName}`;
                if (messageField) messageField.value = `Hi ${farmerName}, I would like to schedule a consultation...`;
                if (emailField) emailField.focus();
                // close modal after scheduling
                closeModal();
            });

            function closeModal() {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }

            modalClose.addEventListener('click', closeModal);

            // close when clicking overlay
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });

            // close on Escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
                    closeModal();
                }
            });
        })();
    // ...existing code...
    </script>
            

            <div class="mt-16">
                <h3 class="text-3xl md:text-4xl font-bold text-green-800 font-playfair text-center mb-12">What to know about your province</h3>
                
                <div class="bg-white p-8 rounded-lg shadow-lg mb-16">
                    <h4 class="text-2xl font-bold font-playfair text-green-700 mb-4 text-center">Provincial Climate & Soil Data</h4>
                    <div class="mb-4 border-b border-gray-200">
                        <nav class="flex flex-wrap -mb-px" id="data-tabs">
                            <button data-target="gauteng-data" class="tab-btn active text-gray-600 py-4 px-6 block hover:text-green-600 focus:outline-none border-b-2 font-medium">Gauteng</button>
                            <button data-target="western-cape-data" class="tab-btn text-gray-600 py-4 px-6 block hover:text-green-600 focus:outline-none border-b-2 font-medium">Western Cape</button>
                            <button data-target="kwazulu-natal-data" class="tab-btn text-gray-600 py-4 px-6 block hover:text-green-600 focus:outline-none border-b-2 font-medium">KwaZulu-Natal</button>
                        </nav>
                    </div>
                    <div id="tab-content">
                        <div id="gauteng-data" class="tab-pane active p-4">
                            <div class="md:flex md:space-x-6 items-center">
                                <div class="md:w-2/3">
                                    <h5 class="font-bold text-lg text-gray-800 mb-2">Gauteng</h5>
                                    <p><strong>Climate Trends:</strong> Summers are hot with frequent afternoon thunderstorms (Oct-Mar). Winters are cool, dry, and sunny (May-Aug). Average summer temps: 15-26¬∞C. Average winter temps: 4-17¬∞C. Annual rainfall: ~700mm.</p>
                                    <br>
                                    <p><strong>Common Soil Types:</strong> Predominantly sandy loam to clay loam. Often acidic and may require compost and lime to improve fertility and structure for vegetable gardening.</p>
                                    <br>
                                    <p><strong>Year Round Crop:</strong>
                                        <ul>
                                            <li>Vegetablesü•¨: Swiss Chard, Spinach, Carrots, Beetroot, Kale, Lettuce (by choosing season-appropriate varieties), and Spring Onions.</li>
                                            <li>Fruitsüçé: Lemons, Strawberries (especially with frost protection in winter), and Pomegranates.</li>
                                        </ul></p>
                                </div>
                                <div class="md:w-1/3 mt-4 md:mt-0">
                                    <img src="cf611ba8-ada8-44ef-8573-1b29373aab40.png" alt="Gauteng Landscape" class="rounded-lg shadow-md w-full h-auto object-cover">
                                </div>
                            </div>
                        </div>
                        <div id="western-cape-data" class="tab-pane hidden p-4">
                            <div class="md:flex md:space-x-6 items-center">
                                <div class="md:w-2/3">
                                    <h5 class="font-bold text-lg text-gray-800 mb-2">Western Cape</h5>
                                    <p><strong>Climate Trends:</strong> Mediterranean climate with cool, wet winters (May-Aug) and hot, dry summers (Sep-Apr). Prone to strong winds ("Cape Doctor"). Average summer temps: 16-27¬∞C. Average winter temps: 7-18¬∞C. Annual rainfall: ~515mm in Cape Town.</p>
                                    <br>
                                    <p><strong>Common Soil Types:</strong> Highly variable, from sandy soils in the Cape Flats to rich loamy soils in the Winelands. Sandy soils require significant compost to improve water retention.</p>
                                    <br>
                                    <p><strong>Year Round Crop:</strong>
                                        <ul>
                                            <li>Vegetablesü•¨: Swiss Chard, Spinach, Carrots, Beetroot, Leeks, Kale, and Spring Onions.</li>
                                            <li>Fruitsüçé: Lemons (especially Eureka) and Cape Gooseberries.</li>
                                        </ul></p>
                                </div>
                                <div class="md:w-1/3 mt-4 md:mt-0">
                                    <img src="Gemini_Generated_Image_a7kcaha7kcaha7kc.png" alt="Western Cape Landscape" class="rounded-lg shadow-md w-full h-auto object-cover">
                                </div>
                            </div>
                        </div>
                        <div id="kwazulu-natal-data" class="tab-pane hidden p-4">
                            <div class="md:flex md:space-x-6 items-center">
                                <div class="md:w-2/3">
                                    <h5 class="font-bold text-lg text-gray-800 mb-2">KwaZulu-Natal</h5>
                                    <p><strong>Climate Trends:</strong> Subtropical climate with hot, humid, and wet summers (Nov-Mar). Winters are very mild and dry. Coastal areas are warmer than inland. Average summer temps: 21-28¬∞C. Average winter temps: 11-23¬∞C. Annual rainfall: ~1000mm.</p>
                                    <br>
                                    <p><strong>Common Soil Types:</strong> Rich, dark soils are common, often with a clay base. Excellent for growing a wide variety of subtropical fruits and vegetables. Good drainage is key.</p>
                                    <br>
                                    <p><strong>Year Round Crop:</strong>
                                        <ul>
                                            <li>Vegetablesü•¨: Sweet Potatoes, Swiss Chard, Spinach (heat-tolerant varieties are best), Green Beans, Carrots, and Beetroot.</li>
                                            <li>Fruitsüçé: Bananas, Papaya (Pawpaw), Guavas, Lemons, Limes, and Passion Fruit (Granadilla)</li>
                                        </ul></p>
                                </div>
                                <div class="md:w-1/3 mt-4 md:mt-0">
                                    <img src="Gemini_Generated_Image_xba19cxba19cxba1.png" alt="KwaZulu-Natal Landscape" class="rounded-lg shadow-md w-full h-auto object-cover">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-8 rounded-lg shadow-lg">
                     <h4 class="text-2xl font-bold font-playfair text-green-700 mb-4 text-center">ü§ñ AI Plant Advisor</h4>
                     <form id="ai-advisor-form">
                        <div class="mb-4">
                            <label for="province-select" class="block text-gray-700 font-medium mb-2">1. Select Your Province:</label>
                            <select id="province-select" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                                <option>Gauteng</option>
                                <option>Western Cape</option>
                                <option>KwaZulu-Natal</option>
                                <option>Eastern Cape</option>
                                <option>Free State</option>
                                <option>Limpopo</option>
                                <option>Mpumalanga</option>
                                <option>North West</option>
                                <option>Northern Cape</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="plant-question" class="block text-gray-700 font-medium mb-2">2. Ask a Question:</label>
                            <input type="text" id="plant-question" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="e.g., 'What are the best low-water vegetables?'" required>
                        </div>
                        <div class="text-center">
                            <button type="submit" id="ask-ai-btn" class="bg-green-700 text-white font-bold px-8 py-3 rounded-full hover:bg-green-800 transition duration-300">Ask AI</button>
                        </div>
                     </form>
                     <div id="ai-advisor-result" class="mt-8 hidden">
                        <h5 class="font-bold text-lg text-gray-800 mb-2">AI Recommendation:</h5>
                        <div id="ai-advisor-content" class="ai-content-style text-gray-700 bg-gray-50 p-6 rounded-lg"></div>
                     </div>
                     <div id="advisor-loader" class="hidden">
                        <div class="loader"></div>
                        <p class="text-center text-gray-600">Consulting local agricultural data...</p>
                     </div>
                </div>
            </div>
        </div>
    </section>

    <section id="gallery" class="py-20 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-green-800 font-playfair">What We Promise & The Future Of FarmWise</h2>
                <p class="text-gray-600 mt-2">A glimpse of the future of our platform, what we currently offer and what to expect</p>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="group relative">
                    <img src="412aa71f-3fdc-48be-a065-02e08f63831e.png" alt="Modern Garden Design" class="w-full h-full object-cover rounded-lg shadow-md">
                    <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition duration-300 flex items-center justify-center rounded-lg">
                        <p class="text-white text-xl font-bold opacity-0 group-hover:opacity-100 transition duration-300">Support & community with foodgardeners*</p>
                    </div>
                </div>
                <div class="group relative">
                    <img src="1684ca67-1483-402b-85a8-87888cf76f1d.png" alt="Flower Bed" class="w-full h-full object-cover rounded-lg shadow-md">
                     <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition duration-300 flex items-center justify-center rounded-lg">
                        <p class="text-white text-xl font-bold opacity-0 group-hover:opacity-100 transition duration-300">Greater Yields</p>
                    </div>
                </div>
                <div class="group relative">
                    <img src="3220a9b9-41bb-48ea-b9b7-79abfc3972d3.png" alt="Stone Pathway" class="w-full h-full object-cover rounded-lg shadow-md">
                     <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition duration-300 flex items-center justify-center rounded-lg">
                        <p class="text-white text-xl font-bold opacity-0 group-hover:opacity-100 transition duration-300">Healthy & succulent crop</p>
                    </div>
                </div>
                 <div class="group relative">
                    <img src="a880ab81-e643-42ac-987f-4556f29a1180.png" alt="Backyard Oasis" class="w-full h-full object-cover rounded-lg shadow-md">
                     <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition duration-300 flex items-center justify-center rounded-lg">
                        <p class="text-white text-xl font-bold opacity-0 group-hover:opacity-100 transition duration-300">Mobile App with live notifications and tips*</p>
                    </div>
                </div>
                 <div class="group relative">
                    <img src="addc998b-acf5-44b8-81c9-a573ae278f63.png" alt="Serene Water Feature" class="w-full h-full object-cover rounded-lg shadow-md">
                     <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition duration-300 flex items-center justify-center rounded-lg">
                        <p class="text-white text-xl font-bold opacity-0 group-hover:opacity-100 transition duration-300">Easy-to-use AI features</p>
                    </div>
                </div>
                 <div class="group relative">
                    <img src="1760337733210.jpg" alt="Manicured Lawn" class="w-full h-full object-cover rounded-lg shadow-md">
                     <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition duration-300 flex items-center justify-center rounded-lg">
                        <p class="text-white text-xl font-bold opacity-0 group-hover:opacity-100 transition duration-300">Community-made video tutorials*</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="about" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 mb-8 md:mb-0">
                    <video class="rounded-lg shadow-lg" src="7655567-uhd_3840_2160_25fps.mp4" autoplay muted loop></video>
                </div>
                <div class="md:w-1/2 md:pl-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-green-800 font-playfair mb-4">About FarmWise</h2>
                    <p class="text-gray-600 mb-4">Founded with a passion for growing and a vision to make food gardening accessible, FarmWise blends the wisdom of traditional gardening with the innovation of artificial intelligence. Our platform provides personalized guidance to help beginners grow with confidence.</p>
                    <p class="text-gray-600">We believe a food garden is more than fresh produce, it's a place of connection, nourishment, and joy. By offering smart tools and tailored advice, we aim to transform spaces of any size into thriving gardens that enrich daily life.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="py-20 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-green-800 font-playfair">Get in Touch</h2>
                <p class="text-gray-600 mt-2">Ready to start your project? Send us a message!</p>
            </div>
            <div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-lg">
                <form id="contact-form" novalidate>
                    <div class="mb-6">
                        <label for="name" class="block text-gray-700 font-medium mb-2">Name</label>
                        <input type="text" id="name" name="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition duration-300" required>
                        <p id="name-error" class="text-red-500 text-sm mt-1 h-4"></p>
                    </div>
                    <div class="mb-6">
                        <label for="email" class="block text-gray-700 font-medium mb-2">Email</label>
                        <input type="email" id="email" name="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition duration-300" required>
                        <p id="email-error" class="text-red-500 text-sm mt-1 h-4"></p>
                    </div>
                    <div class="mb-6">
                        <label for="message" class="block text-gray-700 font-medium mb-2">Message</label>
                        <textarea id="message" name="message" rows="5" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition duration-300" required></textarea>
                        <p id="message-error" class="text-red-500 text-sm mt-1 h-4"></p>
                    </div>
                    <div class="text-center">
                        <button type="submit" class="bg-green-700 text-white font-bold px-8 py-3 rounded-full hover:bg-green-800 transition duration-300">Send Message</button>
                    </div>
                </form>
                 <div id="form-feedback" class="mt-4 text-center h-5"></div>
            </div>
        </div>
    </section>

    <footer class="bg-green-900 text-white py-12">
        <div class="container mx-auto px-6 text-center">
            <p class="text-2xl font-bold font-playfair mb-4">FarmWise</p>
            <div class="flex justify-center space-x-6 mb-6">
                <a href="privacy-policy.html" class="hover:text-green-300">Privacy Policy</a>
                <a href="terms&conditions.html" class="hover:text-green-300">Terms & Conditions</a>
                <a href="cookie-policy.html" class="hover:text-green-300">Cookie Policy</a>
            </div>
            <p>&copy; <span id="year"></span> FarmWise. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // --- UI Elements ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const contactForm = document.getElementById('contact-form');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const messageInput = document.getElementById('message');
        const nameError = document.getElementById('name-error');
        const emailError = document.getElementById('email-error');
        const messageError = document.getElementById('message-error');
        const formFeedback = document.getElementById('form-feedback');
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        const aiPlannerForm = document.getElementById('ai-planner-form');
        const generatePlanBtn = document.getElementById('generate-plan-btn');
        const loader = document.getElementById('loader');
        const aiPlanResult = document.getElementById('ai-plan-result');
        const aiPlanContent = document.getElementById('ai-plan-content');
        const aiPlanTitle = document.getElementById('ai-plan-title');
        const gardenDescriptionInput = document.getElementById('garden-description');
        const uploadImageBtn = document.getElementById('upload-image-btn');
        const gardenImageInput = document.getElementById('garden-image-input');
        const imagePreviewContainer = document.getElementById('image-preview-container');
        const imagePreview = document.getElementById('image-preview');
        const removeImageBtn = document.getElementById('remove-image-btn');
        const micBtn = document.getElementById('mic-btn');
        const voiceStatus = document.getElementById('voice-status');
        const readAloudBtn = document.getElementById('read-aloud-btn');
        const dataTabs = document.getElementById('data-tabs');
        const tabContent = document.getElementById('tab-content');
        const aiAdvisorForm = document.getElementById('ai-advisor-form');
        const askAiBtn = document.getElementById('ask-ai-btn');
        const advisorLoader = document.getElementById('advisor-loader');
        const aiAdvisorResult = document.getElementById('ai-advisor-result');
        const aiAdvisorContent = document.getElementById('ai-advisor-content');
        const provinceSelect = document.getElementById('province-select');
        const plantQuestion = document.getElementById('plant-question');
        const spacingCalculatorForm = document.getElementById('spacing-calculator-form');

        let particles = [];
        let uploadedImage = {
            base64: null,
            mimeType: null,
        };

        // --- Speech Recognition & Synthesis Setup ---
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.lang = 'en-US';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;
        }

        // --- Event Listeners ---

        // Mobile menu toggle
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Close mobile menu when a link is clicked
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

        // --- Spacing Calculator Logic ---
        if (spacingCalculatorForm) {
            spacingCalculatorForm.addEventListener('submit', (e) => {
                e.preventDefault();

                const bedLengthM = parseFloat(document.getElementById('bed-length').value);
                const bedWidthM = parseFloat(document.getElementById('bed-width').value);
                const plantSpacingCm = parseFloat(document.getElementById('plant-spacing').value);
                const rowSpacingCm = parseFloat(document.getElementById('row-spacing').value);

                if (isNaN(bedLengthM) || isNaN(bedWidthM) || isNaN(plantSpacingCm) || isNaN(rowSpacingCm) ||
                    bedLengthM <= 0 || bedWidthM <= 0 || plantSpacingCm <= 0 || rowSpacingCm <= 0) {
                    alert('Please enter valid, positive numbers for all fields.');
                    return;
                }

                const bedLengthCm = bedLengthM * 100;
                const bedWidthCm = bedWidthM * 100;

                const plantsPerRow = Math.floor(bedLengthCm / plantSpacingCm);
                const numRows = Math.floor(bedWidthCm / rowSpacingCm);
                const totalPlants = plantsPerRow * numRows;
                const seedNeeds = Math.ceil(totalPlants * 1.2);

                document.getElementById('plants-per-row').textContent = plantsPerRow;
                document.getElementById('num-rows').textContent = numRows;
                document.getElementById('total-plants').textContent = totalPlants;
                document.getElementById('seed-needs').textContent = seedNeeds;

                document.getElementById('calculator-results').classList.remove('hidden');
            });
        }

        // --- Contact Form Validation Logic ---
        const showError = (input, messageElement, message) => {
            input.classList.remove('border-gray-300', 'focus:ring-green-500');
            input.classList.add('border-red-500', 'focus:ring-red-500');
            messageElement.textContent = message;
        };

        const clearError = (input, messageElement) => {
            input.classList.remove('border-red-500', 'focus:ring-red-500');
            input.classList.add('border-gray-300', 'focus:ring-green-500');
            messageElement.textContent = '';
        };

        const validateName = () => {
            const nameValue = nameInput.value.trim();
            const nameRegex = /^[A-Za-z\s]+$/;
            if (nameValue === '') {
                showError(nameInput, nameError, 'Name is required.');
                return false;
            } else if (!nameRegex.test(nameValue)) {
                showError(nameInput, nameError, 'Name can only contain letters and spaces.');
                return false;
            } else {
                clearError(nameInput, nameError);
                return true;
            }
        };

        const validateEmail = () => {
            const emailValue = emailInput.value.trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
             if (emailValue === '') {
                showError(emailInput, emailError, 'Email is required.');
                return false;
            } else if (!emailRegex.test(emailValue)) {
                showError(emailInput, emailError, 'Please enter a valid email address.');
                return false;
            } else {
                clearError(emailInput, emailError);
                return true;
            }
        };

        const validateMessage = () => {
            const messageValue = messageInput.value.trim();
            if (messageValue === '') {
                showError(messageInput, messageError, 'Message is required.');
                return false;
            } else if (messageValue.split(/\s+/).length < 2) {
                 showError(messageInput, messageError, 'Message should be at least 2 words.');
                 return false;
            } else {
                clearError(messageInput, messageError);
                return true;
            }
        };

        nameInput.addEventListener('input', validateName);
        emailInput.addEventListener('input', validateEmail);
        messageInput.addEventListener('input', validateMessage);

        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Run all validations on submit
            const isNameValid = validateName();
            const isEmailValid = validateEmail();
            const isMessageValid = validateMessage();

            if (isNameValid && isEmailValid && isMessageValid) {
                formFeedback.textContent = 'Thank you for your message! We will get back to you shortly.';
                formFeedback.className = 'text-green-700';
                contactForm.reset();
                // Clear inputs visually
                clearError(nameInput, nameError);
                clearError(emailInput, emailError);
                clearError(messageInput, messageError);

                setTimeout(() => {
                    formFeedback.textContent = '';
                    formFeedback.className = '';
                }, 5000);
            } else {
                 formFeedback.textContent = 'Please fix the errors above.';
                 formFeedback.className = 'text-red-500';
            }
        });
        
        // AI Planner: Trigger hidden file input
        uploadImageBtn.addEventListener('click', () => {
            gardenImageInput.click();
        });

        // AI Planner: Handle file selection and preview
        gardenImageInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (event) => {
                const base64String = event.target.result;
                imagePreview.src = base64String;
                imagePreviewContainer.classList.remove('hidden');
                uploadedImage.base64 = base64String.split(',')[1];
                uploadedImage.mimeType = file.type;
            };
            reader.readAsDataURL(file);
        });
        
        // AI Planner: Remove image preview
        removeImageBtn.addEventListener('click', () => {
            gardenImageInput.value = ''; // Clear the file input
            imagePreview.src = '';
            imagePreviewContainer.classList.add('hidden');
            uploadedImage.base64 = null;
            uploadedImage.mimeType = null;
        });

        // AI Planner: Voice Input
        if (recognition) {
            micBtn.addEventListener('click', () => {
                recognition.start();
                voiceStatus.textContent = 'Listening...';
                micBtn.classList.add('listening', 'text-cyan-500');
            });

            recognition.onresult = (event) => {
                const speechResult = event.results[0][0].transcript;
                gardenDescriptionInput.value = speechResult;
            };

            recognition.onspeechend = () => {
                recognition.stop();
                voiceStatus.textContent = '';
                micBtn.classList.remove('listening', 'text-cyan-500');
            };

            recognition.onerror = (event) => {
                voiceStatus.textContent = 'Error: ' + event.error;
                 micBtn.classList.remove('listening', 'text-cyan-500');
            };
        } else {
            micBtn.style.display = 'none';
            voiceStatus.textContent = 'Voice input not supported in this browser.';
        }

        // AI Planner: Text-to-Speech Output
        readAloudBtn.addEventListener('click', () => {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
                return;
            }
            const textToSpeak = aiPlanContent.textContent;
            const utterance = new SpeechSynthesisUtterance(textToSpeak);
            speechSynthesis.speak(utterance);
        });

        // AI Planner: Main form submission
        aiPlannerForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const description = gardenDescriptionInput.value;
            if (!description.trim()) {
                alert("Please describe your garden.");
                return;
            }

            loader.classList.remove('hidden');
            aiPlanResult.classList.add('hidden');
            generatePlanBtn.disabled = true;
            generatePlanBtn.classList.add('opacity-50');

            // Construct the prompt and payload parts
            let promptText = `You are an expert horticulturalist and garden designer specializing in South African climates, particularly around Pretoria. A user wants to plan a garden. Please format your response using Markdown, and add a relevant emoji at the beginning of each heading (e.g., üåø Recommended Plants).

User's text description: "${description}"`;

            const parts = [{ text: promptText }];

            if (uploadedImage.base64) {
                parts[0].text += "\n\nPlease also analyze the attached image of their space. Consider the visible sunlight, existing structures, and soil appearance in your recommendations.";
                parts.push({
                    inlineData: {
                        mimeType: uploadedImage.mimeType,
                        data: uploadedImage.base64,
                    },
                });
            }

            const payload = {
                contents: [{ role: "user", parts: parts }],
            };

            try {
                const apiKey = "AIzaSyByZxf1wXCJzzudzFslRONwwzM-Iqwzuhc"; // User's API Key
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}. Please check your API key and configuration.`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    aiPlanTitle.textContent = "Your Custom Garden Plan:";
                    aiPlanContent.innerHTML = marked.parse(text);
                    aiPlanResult.classList.remove('hidden');
                } else {
                    throw new Error("Received an unexpected or empty response from the API.");
                }

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                aiPlanTitle.textContent = "Error Generating Plan";
                aiPlanContent.textContent = `Sorry, we couldn't generate a plan at this time. Please check your connection and try again.\n\nDetails: ${error.message}`;
                aiPlanResult.classList.remove('hidden');
            } finally {
                loader.classList.add('hidden');
                generatePlanBtn.disabled = false;
                generatePlanBtn.classList.remove('opacity-50');
            }
        });

        // --- Data Tabs Logic ---
        dataTabs.addEventListener('click', (e) => {
            if (e.target.classList.contains('tab-btn')) {
                // Deactivate all tabs and panes
                dataTabs.querySelectorAll('.tab-btn').forEach(tab => tab.classList.remove('active'));
                tabContent.querySelectorAll('.tab-pane').forEach(pane => pane.classList.add('hidden'));

                // Activate clicked tab and corresponding pane
                e.target.classList.add('active');
                const targetPaneId = e.target.getAttribute('data-target');
                document.getElementById(targetPaneId).classList.remove('hidden');
            }
        });

        // --- AI Advisor Logic ---
        aiAdvisorForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const province = provinceSelect.value;
            const question = (plantQuestion.value || '').trim();

            if (!question) {
                alert("Please ask a question.");
                return;
            }

            // Allow only questions about fruits, vegetables or plants
            const allowedKeywords = [
                "plant","plants",
                "vegetable","vegetables","veg","veggies",
                "fruit","fruits",
                "crop","crops",
                "herb","herbs",
                "seed","seeds","seedling","seedlings",
                "tree","trees","orchard",
                "banana","bananas","apple","apples",
                "orange","oranges","mango","mangos","mangoes",
                "tomato","tomatoes","potato","potatoes",
                "carrot","carrots","lettuce","cabbage"
            ];
            const escapeReg = s => s.replace(/[-/\\^$*+?.()|[\]{}]/g,'\\$&');
            function isPlantFruitVegetable(text) {
                const t = text.toLowerCase();
                return allowedKeywords.some(k => new RegExp(`\\b${escapeReg(k)}\\b`, 'i').test(t));
            }

            if (!isPlantFruitVegetable(question)) {
                advisorLoader.classList.add('hidden');
                aiAdvisorContent.innerHTML = `<p class="text-red-600">Please ask questions specifically about fruits, vegetables or plants (examples: watering, pests, suitable varieties, soil, planting time). Other topics are not accepted here.</p>`;
                aiAdvisorResult.classList.remove('hidden');
                return;
            }

            advisorLoader.classList.remove('hidden');
            aiAdvisorResult.classList.add('hidden');
            askAiBtn.disabled = true;
            askAiBtn.classList.add('opacity-50');

            // reinforce restriction in the prompt
            const prompt = `You are a South African agricultural expert. ONLY answer questions about FRUITS, VEGETABLES or PLANTS. Ignore and refuse any non-plant topics. Answer specifically for the ${province} province (consider climate and soils). Format with Markdown and add an emoji heading (e.g., üí° Tip). Question: "${question}"`;

            try {
                const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = { contents: chatHistory };
                const apiKey = "AIzaSyByZxf1wXCJzzudzFslRONwwzM-Iqwzuhc"; // User's API Key
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}.`);
                }

                const result = await response.json();
                if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts[0]) {
                    const text = result.candidates[0].content.parts[0].text;
                    aiAdvisorContent.innerHTML = marked.parse(text);
                    aiAdvisorResult.classList.remove('hidden');
                } else {
                    throw new Error("Unexpected API response structure.");
                }
            } catch (error) {
                console.error("Error calling Advisor AI:", error);
                aiAdvisorContent.textContent = `Sorry, an error occurred. ${error.message}`;
                aiAdvisorResult.classList.remove('hidden');
            } finally {
                advisorLoader.classList.add('hidden');
                askAiBtn.disabled = false;
                askAiBtn.classList.remove('opacity-50');
            }
        });


        // --- Canvas Particle Animation ---
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }

        function createParticles() {
            particles = [];
            const particleCount = 100;
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5,
                    radius: Math.random() * 1.5 + 1,
                    alpha: Math.random() * 0.5 + 0.2
                });
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;

                if (p.x < -p.radius) p.x = canvas.width + p.radius;
                if (p.x > canvas.width + p.radius) p.x = -p.radius;
                if (p.y < -p.radius) p.y = canvas.height + p.radius;
                if (p.y > canvas.height + p.radius) p.y = -p.radius;

                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(144, 238, 144, ${p.alpha})`;
                ctx.fill();
            });
            requestAnimationFrame(animateParticles);
        }

        // --- Initial Setup ---
        window.addEventListener('load', () => {
            document.getElementById('year').textContent = new Date().getFullYear();
            resizeCanvas();
            createParticles();
            animateParticles();
        });

        window.addEventListener('resize', () => {
            resizeCanvas();
            createParticles();
        });

    </script>
</body>
</html>